<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>มาลองใช้ Python สร้างโมเดล Predict ค่า Sound Transmission loss (TL/STC) [Part-2] :: Bozzlab</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="Peem Srinikorn บทความนี้จะกล่าวถึง วิธีการคำนวณและผลลัพธ์แบบคร่าว ๆ ซึ่งใช้เพื่อการศึกษาเท่านั้น ไม่สามารถนำค่าคำนวณ ไปใช้เพื่ออ้างอิงสำหรับ การก่อสร้างจริงได้นะครับ
 บทความนี้เป็น Part 2 จะเกี่ยวข้องกับการ Predict TL ในระบบผนัง Double Panel, Double Panel with Absorber, Double Panel with Stud, Double Panel with Absorber and Stud, Algorithm flow รวมถึงเปรียบเทียบว่าผนังแต่ละประเภทมีลักษณะผลการ Predict ค่า Sound Tranmission loss (TL)อย่างไรบ้าง
 สำหรับใครที่ยังไม่ได้อ่าน Part 1 เกี่ยวกับ STC/TL ในฉบับเบื้องต้นและวิธีการ Predict แบบ Single Panel (Click ที่นี้ !!)

 รูปที่ 1 ระบบผนังจำแนกตามประเภทการคำนวณ 
ใน Part 1 เราได้อธิบายเรื่องของวิธีการ Predict TL ของ Single Panel ไปแล้ว ซึ่งใน Part นี้จะเข้าเรื่อง Double Panel, Absorber, Connection ซึ่งเป็นระบบที่พบได้ทั่วไปตามตึกบ้าน อาคารโดยเฉพาะกับ ผนังเบา"/>
<meta name="keywords" content="Bozzlab"/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="/post/model_stc_p2/" />


<link rel="stylesheet" href="/assets/style.css">


<link rel="stylesheet" href="/style.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-144-precomposed.png">
<link rel="shortcut icon" href="/img/favicon.png">


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="มาลองใช้ Python สร้างโมเดล Predict ค่า Sound Transmission loss (TL/STC) [Part-2] :: Bozzlab — " />
<meta name="twitter:description" content="Peem Srinikorn บทความนี้จะกล่าวถึง วิธีการคำนวณและผลลัพธ์แบบคร่าว ๆ ซึ่งใช้เพื่อการศึกษาเท่านั้น ไม่สามารถนำค่าคำนวณ ไปใช้เพื่ออ้างอิงสำหรับ การก่อสร้างจริงได้นะครับ
 บทความนี้เป็น Part 2 จะเกี่ยวข้องกับการ Predict TL ในระบบผนัง Double Panel, Double Panel with Absorber, Double Panel with Stud, Double Panel with Absorber and Stud, Algorithm flow รวมถึงเปรียบเทียบว่าผนังแต่ละประเภทมีลักษณะผลการ Predict ค่า Sound Tranmission loss (TL)อย่างไรบ้าง
 สำหรับใครที่ยังไม่ได้อ่าน Part 1 เกี่ยวกับ STC/TL ในฉบับเบื้องต้นและวิธีการ Predict แบบ Single Panel (Click ที่นี้ !!)

 รูปที่ 1 ระบบผนังจำแนกตามประเภทการคำนวณ 
ใน Part 1 เราได้อธิบายเรื่องของวิธีการ Predict TL ของ Single Panel ไปแล้ว ซึ่งใน Part นี้จะเข้าเรื่อง Double Panel, Absorber, Connection ซึ่งเป็นระบบที่พบได้ทั่วไปตามตึกบ้าน อาคารโดยเฉพาะกับ ผนังเบา" />
<meta name="twitter:site" content="/" />
<meta name="twitter:creator" content="Bozz" />
<meta name="twitter:image" content="/p2.jpeg">


<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="มาลองใช้ Python สร้างโมเดล Predict ค่า Sound Transmission loss (TL/STC) [Part-2] :: Bozzlab — ">
<meta property="og:description" content="Peem Srinikorn บทความนี้จะกล่าวถึง วิธีการคำนวณและผลลัพธ์แบบคร่าว ๆ ซึ่งใช้เพื่อการศึกษาเท่านั้น ไม่สามารถนำค่าคำนวณ ไปใช้เพื่ออ้างอิงสำหรับ การก่อสร้างจริงได้นะครับ
 บทความนี้เป็น Part 2 จะเกี่ยวข้องกับการ Predict TL ในระบบผนัง Double Panel, Double Panel with Absorber, Double Panel with Stud, Double Panel with Absorber and Stud, Algorithm flow รวมถึงเปรียบเทียบว่าผนังแต่ละประเภทมีลักษณะผลการ Predict ค่า Sound Tranmission loss (TL)อย่างไรบ้าง
 สำหรับใครที่ยังไม่ได้อ่าน Part 1 เกี่ยวกับ STC/TL ในฉบับเบื้องต้นและวิธีการ Predict แบบ Single Panel (Click ที่นี้ !!)

 รูปที่ 1 ระบบผนังจำแนกตามประเภทการคำนวณ 
ใน Part 1 เราได้อธิบายเรื่องของวิธีการ Predict TL ของ Single Panel ไปแล้ว ซึ่งใน Part นี้จะเข้าเรื่อง Double Panel, Absorber, Connection ซึ่งเป็นระบบที่พบได้ทั่วไปตามตึกบ้าน อาคารโดยเฉพาะกับ ผนังเบา" />
<meta property="og:url" content="/post/model_stc_p2/" />
<meta property="og:site_name" content="มาลองใช้ Python สร้างโมเดล Predict ค่า Sound Transmission loss (TL/STC) [Part-2]" />
<meta property="og:image" content="/p2.jpeg">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2018-11-12 00:00:00 &#43;0000 UTC" />





</head>
<body class="dark-theme">
<div class="container">
  <header class="header">
  <span class="header__inner">
    <a href="/" class="logo" style="text-decoration: none;">
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" width="44" height="44" viewBox="0 0 44 44">
  <polyline fill="none" stroke="#000" stroke-width="2" points="15 8 29.729 22.382 15 35.367"/>
</svg>
</span>
    <span class="logo__text">Bozzlab</span>
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/profile">Profile</a></li>
        
      
        
          <li><a href="/archive">blog</a></li>
        
      
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/profile">Profile</a></li>
      
    
      
        <li><a href="/archive">blog</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>

      </span>
    </span>
  </span>
</header>


  <div class="content">
    
  <div class="post">
    <h2 class="post-title"><a href="/post/model_stc_p2/">มาลองใช้ Python สร้างโมเดล Predict ค่า Sound Transmission loss (TL/STC) [Part-2]</a></h2>
    <div class="post-meta">
      
        <span class="post-date">
            2018-11-12
        </span>
      
      <span class="post-author">— Written by Bozz</span>
      
        <span class="post-read-time">— 8 min read</span>
      
    </div>

    
      <span class="post-tags">
        
          #<a href="/tags/acoustics/">Acoustics</a>&nbsp;
        
          #<a href="/tags/model/">Model</a>&nbsp;
        
          #<a href="/tags/stc/">STC</a>&nbsp;
        
          #<a href="/tags/python/">Python</a>&nbsp;
        
          #<a href="/tags/oop/">OOP</a>&nbsp;
        
      </span>
    

    
      
        <img src="/p2.jpeg" class="post-cover" />
      
    

    <div class="post-content">
      

<h2 id="peem-srinikorn">Peem Srinikorn</h2>

<p>บทความนี้จะกล่าวถึง วิธีการคำนวณและผลลัพธ์แบบคร่าว ๆ ซึ่งใช้เพื่อการศึกษาเท่านั้น ไม่สามารถนำค่าคำนวณ ไปใช้เพื่ออ้างอิงสำหรับ การก่อสร้างจริงได้นะครับ</p>

<blockquote>
<p>บทความนี้เป็น Part 2 จะเกี่ยวข้องกับการ Predict TL ในระบบผนัง Double Panel, Double Panel with Absorber, Double Panel with Stud, Double Panel with Absorber and Stud, Algorithm flow รวมถึงเปรียบเทียบว่าผนังแต่ละประเภทมีลักษณะผลการ Predict ค่า Sound Tranmission loss (TL)อย่างไรบ้าง</p>
</blockquote>

<p>สำหรับใครที่ยังไม่ได้อ่าน Part 1 เกี่ยวกับ STC/TL ในฉบับเบื้องต้นและวิธีการ Predict แบบ Single Panel
<a href="../model_stc_p1">(Click ที่นี้ !!)</a></p>

<p><br>
<img src="https://cdn-images-1.medium.com/max/800/1*D9cHagBcySvc5ILvtQdywA.png" alt="Bozz" class="center"></p>

<p><center> รูปที่ 1 ระบบผนังจำแนกตามประเภทการคำนวณ </center></p>

<p>ใน Part 1 เราได้อธิบายเรื่องของวิธีการ Predict TL ของ Single Panel ไปแล้ว ซึ่งใน Part นี้จะเข้าเรื่อง Double Panel, Absorber, Connection ซึ่งเป็นระบบที่พบได้ทั่วไปตามตึกบ้าน อาคารโดยเฉพาะกับ ผนังเบา</p>

<p>ซึ่ง Double Panel จะเป็นลักษณะระบบผนังแบบมีช่วงว่างระหว่างแผ่นผนัง A และ B ตามรูปที่ 2 ซึ่งในช่วงนั้นจะเป็นอากาศ อาจมีโครงคร่าวยึด เช่น โครงคร่าว C-line,U-line หรืออื่น ๆ เป็นต้น</p>

<p>ส่วนรูปที่ 3 จะเป็น Double Panel เหมือนกัน เพียงแต่เพิ่มวัสดุฉนวนในช่องระหว่างผนัง A และ B เพื่อเพิ่มประสิทธิภาพต่าง ๆ ไม่ว่าจะ ป้องกันความร้อนหรือป้องกันเสียง</p>

<blockquote>
<p>ต่อจากนี้เป็นการอธิบายทฤษฎีที่ใช้ใน Predict TL ในแต่ละรูปแบบผนัง หากใครรีบหรือขี้เกียจมี Code อยู่ใน repo GitHub ครับ ลิงค์ด้านล่างเลย</p>
</blockquote>

<h2 id="double-panel">Double Panel</h2>

<p><br>
<img src="https://cdn-images-1.medium.com/max/800/1*UQkPDYx_2abrXnc84k6gzQ.jpeg" alt="Bozz" class="center"></p>

<p><center> รูปที่ 2 ตัวอย่าง Double Panel </center></p>

<p>เริ่มจาก สมการหลักของ Double Panel</p>

<p><br>
<img src="https://cdn-images-1.medium.com/max/800/1*cE72qsia9K9HkRh3b61CoA.png" alt="Bozz" class="center"></p>

<p><center> สมการหลักที่ใช้การ Predict TL of Double Panel
 </center></p>

<p>จะเห็นได้ว่า สมการ ถูกแบ่งเป็นเงื่อนไข สามเงื่อนไข ซึ่งตัวกำหนดจะเป็นลำดับความถี่ โดย เงื่อนไขแรก คือ เมื่อ f &lt; f0 ซึ่งในสมการ (เดี๋ยวมาดูว่าคืออะไร) ต่อด้วยสมการจะใช้ ข้อมูล มวล ของผนังทั้ง 2 ด้านรวมกัน ในสมการแรก จะค่อนข้างคล้ายกับ Mass law (ลิงค์สำหรับ Single Panel)</p>

<p>ในเงื่อนไขที่ 2 คือ f ≥ f0, f ≤ fl โดยสมการนี้จะมีตัวแปร R1 และ R2 เข้ามาเกี่ยวข้อง ซึ่งมันก็คือ ผลรวม TL ของผนังในแต่ละฝั่ง(R1 = A , R2 =B) นั้นเอง และ d คือ ระยะห่างของแผ่นผนัง A และ B (distance of Air gap)</p>

<blockquote>
<p>ลองเขียน Code ตามไปเลย</p>
</blockquote>

<pre><code class="language-python">
def freq(self):
        me = ((self.pair*(self.c**2))/self.d)*((1/self.Mass_A)+(1/self.Mass_B))
        f0 = (1/(2*np.pi))*(np.sqrt(me))
        fl = 55/self.d
        return f0,fl

    def Con1(self): # f &lt; f0
        f0 = DoublePanel.freq(self)[0]
        f = self.f
        TL_con1 = [20*np.log10(f[i]*(self.Mass_A+self.Mass_B))-47 for i in range(0,len(f)) if f[i] &lt; f0]
        return TL_con1

    def Con2(self): # f &gt; f0 and f &lt; fl
        R_A = self.Panel_A
        R_B = self.Panel_B
        f = self.f
        f0 = DoublePanel.freq(self)[0]
        fl = DoublePanel.freq(self)[1]
        TL_Con2 = [ R_A[i] + R_B[i] + 20*np.log10(f[i]*self.d) -29 for i in range(0,len(f)) if f[i] &gt;= f0 and f[i] &lt;= fl]
        return TL_Con2

    def Con3(self): # f &gt; fl
        R_A = self.Panel_A
        R_B = self.Panel_B
        f = self.f
        fl = DoublePanel.freq(self)[1]
        TL_Con3 = [ R_A[i] + R_B[i] + 6 for i in range(0,len(f)) if f[i] &gt; fl ]
        return TL_Con3

    def Total_Double(self): # Total TL of Double Panel
        f = self.f
        R1 = DoublePanel.Con1(self)
        R2 = DoublePanel.Con2(self)
        R3 = DoublePanel.Con3(self)
        R_Total = R1 + R2 + R3
        R_TotalSTC = [R_Total[i] for i in range(0, len(f)) if f[i] &gt;= 125 and f[i] &lt;= 4000]
        return R_TotalSTC,R_Total
</code></pre>

<h2 id="frequency-mass-air-mass-resonance">Frequency Mass-Air-Mass resonance</h2>

<p>ก็คือ ชื่อเต็มของ f0 หรือเรียกว่าเป็น ปรากฎการณ์ resonance ที่เกิดขึ้นในช่องว่างระหว่างผนังทั้งสอง โดยส่วนใหญ่จะเกิดในช่วงความถี่ต่ำ</p>

<p><br>
<img src="https://cdn-images-1.medium.com/max/800/1*70fwBGoKr5MrYP_-IG9l5A.png" alt="Bozz" class="center"></p>

<p><center> รูปที่ 4 Mass-air-Mass resosnance
 </center></p>

<h2 id="double-panel-with-absorber">Double Panel with Absorber</h2>

<p><br>
<img src="https://cdn-images-1.medium.com/max/800/1*DKnVd6fKeObmUWk-3hAO7g.jpeg" alt="Bozz" class="center"></p>

<p><center> รูปที่ 5 Double Panel with Absorber
 </center></p>

<p>จากรูปจะเห็นได้ว่า เรามีวัสดุฉนวนเพิ่มเข้า ซึ่งวิธีการ Predict จะต้องเปลี่ยนไปแน่นอนและค่าป้องกันเสียงก็ควรจะสูงขึ้นตามด้วยเช่นกัน โดยค่าคุณสมบัติที่เราจำเป็นต้องมีก็คือ Flow Resistance ของฉนวนและมีวิธีการ Predict ตามสมการเหล่านี้</p>

<p><br>
<img src="https://cdn-images-1.medium.com/max/800/1*ZAl_CWZPc9gp_6gj3r9zHg.png" alt="Bozz" class="center"></p>

<p><center> สมการ Predict TL of Double Panel with Absorber
 </center></p>

<p>จากสมการจะเห็นได้ว่า มีการใช้ค่า R1 และ R2 เช่นกัน เหมือนสมการก่อน และเราต้องไปหาค่า beta และ alpha ซึ่งมีหน้าที่เป็น Real and Imaginary part of propagation coefficient of the absorptive blanket ของวัสดุฉนวนเรา (ชื่อโคตรยาววว) โดยเราสามารถหาได้จากสมการด้านล่างนี้</p>

<p><br>
<img src="https://cdn-images-1.medium.com/max/800/1*K_ONE3wmr_V0mhoGbKOzNQ.png" alt="Bozz" class="center"></p>

<p><center> สมการหาค่า alpha และ beta เพื่อใช้ในการคำนวณ Absorber
 </center></p>

<p>จากสมการด้านบนก็คือ propagation coefficient ที่จะคำนวณเพื่อหาว่า alpha และ beta ของวัสดุฉนวนเรามีค่าเท่าไร โดยค่า p0 ก็คือ ค่าความหนาแน่นอากาศ และ Sigma จะเป็น Flow resistance ของวัสดุฉนวนเรา</p>

<blockquote>
<p>ใน Code ก็จะต้องแบ่ง real, imag ตามเช่นกัน</p>
</blockquote>

<pre><code class="language-python"> def Absorber(self): # Absorber Cal
        f = self.f
        fl = DoublePanel.freq(self)[1]
        f_ab = [f[i] for i in range(0,len(f)) if f[i] &gt; fl]
        R_A = self.Panel_A
        R_B = self.Panel_B
        k = [(2 * np.pi * f_ab[i]) / self.c for i in range(0, len(f_ab))]
        omega = [(2 * np.pi * f_ab[i]) for i in range(0, len(f_ab))]
        prob = [((omega[i] / self.c) * 0.189 * (self.pair*f_ab[i] / self.flow) ** -0.595) + ( 1j * (omega[i] / self.c) * ((1 + 0.0978 * (self.pair * f_ab[i]) / (self.flow)) ** -0.7)) for i in range(0, len(f_ab))]
        alpha = [prob[i].real for i in range(0, len(prob))]
        beta = [prob[i].imag for i in range(0, len(prob))]
        TL = [R_A[i] + R_B[i] for i in range(0, len(f)) if f[i] &gt; fl]
        TL_Ab = [TL[i] + 8.6 * alpha[i] * self.d + 20*np.log10(beta[i] / k[i]) for i in range(0, len(f_ab))]
        return TL_Ab

    def Total_Double_Absorb(self): # Total TL Double Panel with Absorber
        f = self.f
        R_TL = DoublePanel.Con1(self) + DoublePanel.Con2(self)
        R_Ab = R_TL + DoublePanel.Absorber(self)
        R_AbSTC = [R_Ab[i] for i in range(0, len(f)) if f[i] &gt;= 125 and f[i] &lt;= 4000]
        return R_AbSTC,R_Ab

</code></pre>

<h2 id="double-panel-with-connection">Double Panel with Connection</h2>

<p><br>
<img src="https://cdn-images-1.medium.com/max/800/1*DCs9fSCbM35oW6UsRXOB4w.jpeg" alt="Bozz" class="center"></p>

<p><center> รูปที่ 6 Double Panel with Connection
 </center></p>

<p>จากทั้งสอง ตัวอย่างที่เราเพิ่งผ่านมาจะพบว่า ไม่มีโครงคร่าวใด ๆ เป็นโครงสร้างในระบบผนัง ซึ่งในความเป็นจริงเป็นไปได้น้อยมาก ที่ระบบผนังเราจะไม่มีโครงคร่าวภายในที่ทำหน้าที่เป็นโครงสร้าง</p>

<p>โดยวิธีการ Predict ก็จะเปลี่ยนเงื่อนไขตามไป ซึ่งในรูปแบบนี้จะต้องมีค่าคุณสมบัติของ Spacing Stud หรือระยะห่าง ระหว่าง Stud A และ Stud B โดยการตั้ง Stud จะคำนึงที่โครงสร้างในการก่อสร้างจริง เช่น หากผนังมีขนาดกว้างและสูงมาก อาจจะต้องใส่ Stud ที่ค่อนข้างถี่ เพื่อให้ผนังของเรามีความแข็งแรงและปลอดภัย ซึ่งมีความจำเป็นอย่างมากในก่อสร้างจริง แต่ผลกระทบก็คือ เนื่องด้วยพลังงานเสียง สามารถเดินทางผ่านตัวกลางชนิดของแข็งได้เป็นอย่างดี พลังงานเสียงก็จะสามารถส่งผ่านตัว Stud ได้เช่นกัน นั้นหมายความว่า ค่า TL ของผนังเราก็จะลดลงนั้นเอง</p>

<p><br>
<img src="https://cdn-images-1.medium.com/max/800/1*uAf6P-NdoMm-QQRe0VNMEw.png" alt="Bozz" class="center"></p>

<p><center>
รูปที่ 7 Sound Transmission by Stud connection
 </center></p>

<p>โดยวิธีการ Predict ที่มี Connection จะถูกแบ่งเป็น Line Connection และ Point Connection ในบทความนี้เราจะใช้แบบ Line Connection ซึ่งมีสมการดังนี้</p>

<p><br>
<img src="https://cdn-images-1.medium.com/max/800/1*8WUZgb-SJHNPVdJcPfpw_g.png" alt="Bozz" class="center"></p>

<p><center>
สมการ หาค่าลดทอนจาก Stud เมื่อ f &gt; fl/2 and f &lt; fl
 </center></p>

<p><br>
<img src="https://cdn-images-1.medium.com/max/800/1*DDBotgpLWAqK_4iXe9XwVg.png" alt="Bozz" class="center"></p>

<p><center>
สมการ หาค่าลดทอนจาก Stud เมื่อ f &gt; fl
 </center></p>

<p>โดยเราสามารถใช้ผล TL จาก Double Panel มาคำนวณต่อได้ ซึ่งจะกลายเป็น TL of Double Panel with Stud แต่หากเราใช้ TL ที่มาจาก Double Panel with Absorber ผลที่ได้จะกลายเป็น Double Panel with Stud and Absorber หน้าตาจะคล้ายรูปด้านล่างนี้</p>

<p><br>
<img src="https://cdn-images-1.medium.com/max/800/1*D2U9IBPAclPUpZpH6GvBNA.jpeg" alt="Bozz" class="center"></p>

<p><center>
รูปที่ 8 Double Panel with Absorber and Stud
 </center></p>

<blockquote>
<p>ลองเขียน Code ไปเลย จะได้ไม่งง</p>
</blockquote>

<pre><code class="language-python"> def Stud(self): #stud line connection calculation
        deltaRb = 10*np.log10(self.spac*self.fc_A)+ 20*np.log10((self.Mass_A/(self.Mass_A+self.Mass_B)))-18
        fcl = (((self.Mass_A*np.sqrt(self.fc_B))+(self.Mass_B*np.sqrt(self.fc_A)))/(self.Mass_A+self.Mass_B))**2
        deltaRm = 10*np.log10(((self.Area_A)/(self.Height_A))*((np.pi*fcl)/(2*self.c)))

        return deltaRb,deltaRm

    def Total_Double_Stud(self): #Total TL of Double Panel with Stud
        f = self.f
        fl = DoublePanel.freq(self)[1]
        deltaRb = DoublePanel.Stud(self)[0]
        deltaRm = DoublePanel.Stud(self)[1]
        R = DoublePanel.Total_Double(self)[1]
        R_1 = [ R[i] for i in range(0,len(f)) if f[i] &lt;= fl*0.5 ]
        R_2 = [ R[i]-deltaRb for i in range(0,len(f)) if f[i] &gt;= fl*0.5 and f[i] &lt;= fl]
        R_3 = [ R[i]-deltaRm for i in range(0,len(f)) if f[i] &gt;= fl]
        R_Total = R_1+R_2+R_3
        R_TDS_STC = [R_Total[i] for i in range(0, len(f)) if f[i] &gt;= 125 and f[i] &lt;= 4000]
        return R_TDS_STC,R_Total

    def Total_Double_Absorb_Stud(self): #Total TL of Double Panel with Absorber and Stud
        f = self.f
        fl = DoublePanel.freq(self)[1]
        deltaRb = DoublePanel.Stud(self)[0]
        deltaRm = DoublePanel.Stud(self)[1]
        R = DoublePanel.Total_Double_Absorb(self)[1]
        R_1 = [ R[i] for i in range(0,len(f)) if f[i] &lt;= 0.5 * fl ]
        R_2 = [ R[i]-deltaRb for i in range(0,len(f)) if f[i] &gt;= 0.5*fl and f[i] &lt;= fl]
        R_3 = [ R[i]-deltaRm for i in range(0,len(f)) if f[i] &gt;= fl]
        R_Total = R_1+R_2+R_3
        R_TDAS_STC = [R_Total[i] for i in range(0, len(f)) if f[i] &gt;= 125 and f[i] &lt;= 4000]
        return R_TDAS_STC, R_Total
</code></pre>

<h2 id="ผลการ-predict">ผลการ Predict</h2>

<p>จากวิธีการทั้งหมด เราจะพบว่าในแต่ละประเภทมีความแตกต่างของวิธีการ Predict อย่างชัดเจนแต่ก็มีบางส่วนเช่นสมการพื้นฐานและผล TL จากผนังเดียวของแต่ละด้านมาคำนวณ คราวนี้เราลองมาดูผลลัพธ์ในแต่ละแบบกัน</p>

<p><br>
<img src="https://cdn-images-1.medium.com/max/800/1*8ukywsj7mOJe_n_utts_ZQ.png" alt="Bozz" class="center"></p>

<p><center>
ผลการเปรียบเทียบ TL ในแต่ละรูปแบบผนัง </center></p>

<p>จากกราฟก็พบว่า แนวโน้มของการ Predict ตั้งแต่ช่วง 50 Hz จนถึง 400 จะค่อนข้างเหมือนกัน ซึ่งช่วง 400 Hz คือ fl/2 นั้นเอง (fl มีค่าประมาณ 800 Hz) และผนังที่มี Stud จะมีค่า TL ในแนวโน้มที่จะลดลงและขึ้นสูงสุดในช่วง 2,000 Hz ที่แทบจะเป็นจุด Max ของ TL ในทุกระบบผนัง และหลังจากนั้นจะค่อย ๆ เข้าใกล้จุด Critical Frequency ของผนังในช่วง 2,500 Hz และค่อยไต่กลับมาในช่วง 3,150 Hz เป็นต้นไป ซึ่งจากทั้งหมดจะพบว่า Stud นั้นมีค่าลดทอน TL ประมาณ 15 dB แต่หากมี Absorber ก็จะช่วยให้ค่า TL เพิ่มขึ้นนิดนึง ในทางกลับกัน รูปแบบ Double Panel ที่ไม่มี Stud จะให้ค่า TL ที่สูงมาก และหากมี Absorber เข้าไปในระบบผนังจะเห็นว่าค่า TL เพิ่มขึ้นไปอีก</p>

<p>ซึ่งจากทั้งหมดไม่ได้แปลว่า ระบบผนังต่าง ๆ มีข้อเสียหรือข้อดีใด ๆ ต่อการป้องกันเสียง เพียงแต่ว่าขึ้นอยู่กับความเหมาะสมในบริบทสภาพแวดล้อมนั้น ๆ การที่มี Stud ไม่ได้แปลว่าแย่ เพราะระบบผนังเบา ก็ต้องอาศัยโครงคร่าวเช่นพวก C-line U-line เป็นโครงสร้างหากไม่มีก็ก่อสร้างไม่ได้ ในขณะที่ Double Panel แบบปกติ ที่ไม่มีโครงคร่าวยึดภายใน อาจจะพบได้ใน การก่อสร้างที่เป็นการก่อผนังอิฐ และอีกฝั่งนึงเป็นผนังอิฐหรือผนังเบาเช่นกัน เพียงแต่เว้นระยะ Air gap ไว้เท่านั้น ซึ่งไม่ว่าจะในระบบไหนเราก็สามารถเพิ่มประสิทธิภาพการป้องกันเสียงได้โดยใส่ฉนวนนั้นเอง ขึ้นอยู่กับว่า ผนังของเรามีช่องว่างมากน้อยแค่ไหนและสามารถใส่ได้หรือไม่</p>

<h2 id="model-structure">Model Structure</h2>

<p>จากที่เราเห็นทั้งว่า การคำนวณต่าง ๆ ทั้ง Single Panel และ Double Panel นั้นเกี่ยวข้องกันโดยตรง จนแทบไม่สามารถที่แยกกันได้ หาก coding แบบหน้าเดียวคงจะลำบากทั้งคนเขียนและคนใช้งาน เลยได้ทำให้อยู่ในรูปแบบกึ่ง ๆ OOP เพื่อให้ แบ่งหน้าที่แต่ละส่วนให้เป็น class และทำให้แต่ละส่วนทำงานเชื่อมต่อกันได้ ซึ่งจะง่ายต่อการคำนวณและเรียกใช้งาน</p>

<p><br>
<img src="https://cdn-images-1.medium.com/max/800/1*Q9x3g-9g_U35-RKMm55tLw.png" alt="Bozz" class="center"></p>

<p><center>
รูปที่ 9 การเชื่อมต่อในแต่ละคลาสของ Model </center></p>

<blockquote>
<p>โดยไฟล์ต่าง ๆ จะมีหน้าที่เป็น Class ดังต่อไปนี้</p>
</blockquote>

<ul>
<li>SinglePanel_A เป็นโมเดลสำหรับ Predict TL ผนังด้าน A</li>
<li>SinglePanel_B เป็นโมเดลสำหรับ Predict TL ผนังด้าน B</li>
<li>DoublePanel เป็นโมเดลสำหรับ Predict TL Double Panel ทุกเงื่อนไข ไม่ว่าจะเป็น Double Panel, Double Panel with Absorber,Double Panel with Stud</li>
<li>Action ทำหน้าที่ เป็น Console ในการควมคุม Class ต่าง ๆ ให้ง่ายขึ้นเพื่อใช้ในการป้อนค่าและรับค่าส่งทั้งหมด</li>
<li>Show ทำหน้าที่แสดงผลลัพธ์และประเมินโดยจะมีฟังก์ชั่น เช่น plot(),plot_STC(), data(),info() เป็นต้น ซึ่งจะอยู่ในรูป Graph Dictionary และ DataFrames</li>
<li>SinglePanel จะเป็น class แรกสามารถใช้ได้โดยตรงเลย มีฟังก์ชั่น plot และ STC ในตัวอยู่แล้ว ดูวิธีการใช้ได้ที่ Part 1</li>
</ul>

<h2 id="การทำงานและว-ธ-การใช-งาน-model-รวมถ-งการเร-ยกใช-function-ในแต-ละ-class">การทำงานและวิธีการใช้งาน Model รวมถึงการเรียกใช้ function ในแต่ละ class</h2>

<p>การทำงานเบื้องต้นก็คือให้ Action เป็นเหมือนตัว console ควมคุม class ต่าง ๆ โดยจะ import ทุกไฟล์ ทุก class ให้มาอยู่ใน Action</p>

<pre><code class="language-python">
from DoublePanel import DoublePanel
from SinglePanel_A import SinglePanel_A
from SinglePanel_B import SinglePanel_B
from SinglePanel import SinglePanel
from Show import Show

if __name__ =='__main__':
  
    #Attribute SinglePanel ([Mass(kg)],[Thickness(mm)],[Modulus(GPa)],[Damping Ratio],[Width(m)],[Height(m)])
    Panel_A = SinglePanel_A(12,15,2.5,0.1,3,3)
    Panel_B = SinglePanel_B(12,15,2.5,0.1,3,3)
    #Attribute DoublePanel ([Panel_A],[Panel_B],[Distance of Panel_A , Panel_B (mm)] ,[Flow Resistance], [Spacing Stud (mm)])
    Double = DoublePanel(Panel_A,Panel_B,65,12000,450)
    #Arrtribute Show ([Total_Values])
    # for DoublePanel -&gt; [Total_Double() , Total_Double_Absorb() , Total_Double_Stud() , Total_Double_Absorb_Stud()]
    # for SingelPanel -&gt; [ Values() ]
    Show = Show(Double.Total_Double())
    # Show function 
    Show.plot() #plot all full range frequency 50 Hz - 5,000 Hz 
    Show.plot_STC() #plot as STC range frequency 125 Hz - 4,000 Hz 
    Show.data() #read TL data as Dictionary 
    Show.data_pd() #read TL data as DataFrames
    Show.info() #read STC and Deficiency Values as Dictionary

</code></pre>

<p>จะเห็นได้ว่าเราได้นำ class จากทุกไฟล์มาไว้ในไฟล์เดียวเพื่อให้ง่ายต่อการเรียกใช้งาน โดย Panel_A,Panel_B จะทำหน้าที่ Predict ค่า TL ที่เป็น SinglePanel ออกมาจาก class เราไม่ต้องไปใช้งานในไฟล์นั้น ๆ แล้วก็อปค่าออกมาอีกที หลังจากที่เราได้ค่า TL ของ SinglePanel แล้ว ขั้นตอนไปก็คือหากเราต้องการ Predict TL แบบ Double เราก็นำค่า TL จาก SinglePanel ในแต่ละด้านมาคำนวณได้เลย และป้อนค่าอื่น ๆ เข้าไปใน class เช่น ระยะห่างระหว่าง Panel A และ B หรือ Flow resistance ของฉนวน และสุดท้ายคือ Spacing Stud</p>

<p>เนื่องด้วย class DoublePanel นั้นสามารถเรียกใช้งานเฉพาะส่วนได้ function แยกออกจากกันชัดเจน ไม่ได้เป็น inheritance กัน ส่งผลให้เรา ถ้าใส่ค่า attribute ครบของ class DoublePanel ก็จะเรียกเฉพาะส่วนได้เช่น Total_Double() คือ ทำหน้าที่ Predict ให้อยู่ในรูปแบบของ Double Panel ที่ไม่มี Stud และ Absorber เหมือนจำลองว่า Panel A และ B แยกตัวออกจากกันในระยะห่างที่เรากำหนดไป จะไม่นำ Stud และ Absorber เข้ามาคิดคำนวณ แต่หากใช้ฟังก์ชั่น Total_Double_Stud() ก็จะเป็นการ Predict ให้อยู่ในรูปแบบของ Double Panel with Stud แต่ไม่มี Absorber นั้นเอง โดยสามารถดู code และชื่อ function ทั้งหมดได้ที่ repo GitHub ด้านล่าง</p>

<p>ตัวอย่างผลของการใช้ฟังก์ชั่น Show.plot_STC()</p>

<p><br>
<img src="https://cdn-images-1.medium.com/max/800/1*hImZcXTsUmI3oq9ioCqNlg.png" alt="Bozz" class="center"></p>

<p><center>
TL data /STC </center></p>

<p>ตัวอย่างผลของการใช้ฟังก์ชั่น Show.plot()</p>

<p><br>
<img src="https://cdn-images-1.medium.com/max/800/1*hYCOSYXoiuC4ITF-NchjxQ.png" alt="Bozz" class="center"></p>

<p><center>
TL data
 </center></p>

<h2 id="สร-ป-model">สรุป Model</h2>

<p>จากที่ได้ทดลอง Predict TL ตามสมการและสูตรต่าง ๆ ที่นำมาใช้เป็น Reference ในการ Predict พบว่า ผลที่ออกมาค่าค่อนข้าง overrate มาก ๆ ด้วย ซึ่ง Model นี้ใช้เพื่อศึกษา ผลการ Predict TL เท่านั้น จึงไม่เป็นผลเสียเท่าไร เราสามารถทดลองได้จากการเปลี่ยนค่าต่าง ๆ ใน Attribute เพื่อดูผล TL ว่าเปลี่ยนไปมากน้อยแค่ไหน เพราะหากลองเทียบแนวโน้มของ TL ระหว่าง Predict กับ Lab Test จะไม่มีความแตกต่างกันมากเท่าไร ขึ้นอยู่กับข้อมูลคุณสมบัติวัสดุ แต่หากดูในแกน Amplitude จะต่างกันอย่างชัดเจนมาก ๆ โดยเพราะค่า Lab / Field Test จะให้ TL ต่ำกว่านี้มาก ทั้งนี้อาจเพราะด้วยสภาพแวดล้อมนั้น ๆ ที่อาจะส่งต่อ TL หรือ วิธีการวัด ก็ตาม โดยรวมก็คือ Model นี้สามารถใช้เพื่อทดลองและศึกษาวิธีการ Predict TL ในเบื้่องต้นได้ โดยใช้ค่าคุณสมบัติของวัสดุต่าง ๆ ตามที่ได้อธิบายมาทั้ง Part 1 และ Part 2 ครับ ไม่สามารถนำไปใช้เพื่ออ้างอิงการก่อสร้างจริงได้นะครับ</p>

<p><strong>GitHub : <a href="https://github.com/bozzlab/Model_TL-STC">https://github.com/bozzlab/Model_TL-STC</a></strong></p>

<blockquote>
<p>อ้างอิง / Reference</p>
</blockquote>

<ul>
<li>Jason Esan Cambridge (2006). Prediction tools for airborne sound insulation-evaluation and application. Department of Civil and Environmental Engineering Division of Applied Acoustics, CHALMERS UNIVERSITY OF TECHNOLOGY, Sweden</li>
<li>K. O. Ballagh (2004) Accuracy of Prediction Methods for Sound Transmission Loss, The 33rd International Congress and Exposition on Noise Control Engineering</li>
</ul>

<p>ปล. คอมเม้นกันได้นะครับ เหงามาก</p>

<p>ปล2. ตอนแรกว่าจะทำ GUI แต่ขี้เกียจ</p>

    </div>
    
      <div class="pagination">
        <div class="pagination__title">
          <span class="pagination__title-h">Read other posts</span>
          <hr />
        </div>
        <div class="pagination__buttons">
          
            <span class="button previous">
              <a href="/post/hello/">
                <span class="button__icon">←</span>
                <span class="button__text"> !&gt;_ Bozzlab</span>
              </a>
            </span>
          
          
            <span class="button next">
              <a href="/post/model_stc_p1/">
                <span class="button__text">มาลองใช้ Python สร้างโมเดล Predict ค่า Sound Transmission loss (TL/STC)</span>
                <span class="button__icon">→</span>
              </a>
            </span>
          
        </div>
      </div>
    

    

    </div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">Bozzlab @ 2019</div>
    
  </div>
</footer>

<script src="/assets/main.js"></script>
<script src="/assets/prism.js"></script>


  
</div>

</body>
</html>
